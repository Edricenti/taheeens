<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/3926bf6b30.js" crossorigin="anonymous"></script>
    <title>User Information</title>
    <style>
        body {
            background: #212121;
            align-items: center;
            text-align: center;
            color: white;
        }

        #result {
            margin-top: 20px;
        }

        #error {
            color: red;
            margin-top: 10px;
        }

        .searchBox {
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, 50%);
            background: #e8f0fe;
            height: 40px;
            border-radius: 40px;
            padding: 10px;
            overflow: hidden; /* Added overflow: hidden to prevent color change overflow */
        }

        .searchBox:hover > .searchInput {
            width: 240px;
            padding: 0 6px;
        }

        .searchBox:hover > .searchButton {
            background: black;
            color: #ffffff;
        }

        .searchButton {
            color: black;
            float: right;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e8f0fe;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: 0.4s;
        }

        .searchInput {
            border: none;
            background: none;
            outline: none;
            float: left;
            padding: 0;
            color: white;
            font-size: 16px;
            transition: 0.4s;
            line-height: 40px;
            width: 0px;
        }

        @media screen and (max-width: 620px) {
            .searchBox:hover > .searchInput {
                width: 150px;
                padding: 0 6px;
            }
        }
    </style>
</head>
<body>

<div style="margin-top: 15%;">
    <h1>User Information</h1>
    <a href="users/register.html" style="color: aqua; text-decoration: none; margin-bottom: 9%;">Register Now!</a>
    <label for="username">Enter your username:</label>
    <div class="searchBox">
        <input class="searchInput" type="text" name="" placeholder="USERNAME" id="username">
        <button class="searchButton" href="#" onclick="getUserInfo()">
            <i class="fas fa-search"></i>
        </button>
    </div>

    <div id="result" style="margin-top: 8%;"></div>
    <div id="error" style="margin-top: 8%;"></div>
</div>

<script>
    async function getUserInfo() {
        var username = document.getElementById('username').value;
        var resultDiv = document.getElementById('result');
        var errorDiv = document.getElementById('error');

        try {
            // Fetch user information from external JSON file
            const response = await fetch('users/users.json');

            // Check if the response status is ok (HTTP 200-299)
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const userInformation = await response.json();

            // Simulate an error for unmatched username (replace with actual error handling logic)
            if (!userInformation[username]) {
                errorDiv.innerText = 'Error: Username does not match any records.';
                resultDiv.innerHTML = '';
            } else {
                errorDiv.innerText = '';
                var userInfo = userInformation[username];
                var resultHTML = "<h2>User Information</h2>";
                resultHTML += "<p><strong>Name:</strong> " + userInfo.name + "</p>";
                resultHTML += "<p><strong>Email:</strong> " + userInfo.email + "</p>";
                resultHTML += "<p><strong>Task 1:</strong> " + userInfo.task1 + "</p>";
                resultHTML += "<p><strong>Task 2:</strong> " + userInfo.task2 + "</p>";
                resultHTML += "<p><strong>Task 3:</strong> " + userInfo.task3 + "</p>";
                resultHTML += "<p><strong>Task 4:</strong> " + userInfo.task4 + "</p>";
                resultHTML += "<p><strong>Task 5:</strong> " + userInfo.task5 + "</p>";
                resultHTML += "<p><strong>Task 6:</strong> " + userInfo.task6 + "</p>";
                resultHTML += "<p><strong>Task 7:</strong> " + userInfo.task7 + "</p>";
                // ... other tasks
                resultDiv.innerHTML = resultHTML;
            }
        } catch (error) {
            console.error('Error fetching or parsing user information:', error);
            errorDiv.innerText = 'Error: Unable to fetch or parse user information.';
            resultDiv.innerHTML = '';
        }
    }
</script>

</body>
</html>
