<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="users/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/3926bf6b30.js" crossorigin="anonymous"></script>
    <title>User Information</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input {
            width: 300px;
            margin-bottom: 10px;
            padding: 5px;
            background: transparent;
            border-right: none;
            padding-top: 20px;
        }

        button {
            padding: 5px;
            cursor: pointer;
            color: #fff;
            background: transparent;
            border: none;
        }

        #result {
            margin-top: 20px;
        }

        #error {
            color: red;
            margin-top: 10px;
        }
    </style>
</head>
<body 
style=" align-items: center;
text-align: center;">

 <div style="margin-top: 20%;">
    <h1>User Information</h1>
    <a href="users/register.html" style=" color: aqua; text-decoration: none; margin-bottom: 9%;">Register Now!</a>
    <label for="username">Enter your username:</label>
    <input type="text" id="username" placeholder="Type your username">
    

    <button onclick="getUserInfo()"><i class="fa-solid fa-magnifying-glass"></i> Search</button>

    <div id="result"></div>
    <div id="error"></div>
 </div>

    <script>
        async function getUserInfo() {
            var username = document.getElementById('username').value;
            var resultDiv = document.getElementById('result');
            var errorDiv = document.getElementById('error');

            try {
                // Fetch user information from external JSON file
                const response = await fetch('users/users.json');

                // Check if the response status is ok (HTTP 200-299)
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const userInformation = await response.json();

                // Simulate an error for unmatched username (replace with actual error handling logic)
                if (!userInformation[username]) {
                    errorDiv.innerText = 'Error: Username does not match any records.';
                    resultDiv.innerHTML = '';
                } else {
                    errorDiv.innerText = '';
                    var userInfo = userInformation[username];
                    var resultHTML = "<h2>User Information</h2>";
                    resultHTML += "<p><strong>Name:</strong> " + userInfo.name + "</p>";
                    resultHTML += "<p><strong>Email:</strong> " + userInfo.email + "</p>";
                    resultHTML += "<p><strong>Task 1:</strong> " + userInfo.task1 + "</p>";
                    resultHTML += "<p><strong>Task 2:</strong> " + userInfo.task2 + "</p>";
                    resultHTML += "<p><strong>Task 3:</strong> " + userInfo.task3 + "</p>";
                    resultHTML += "<p><strong>Task 4:</strong> " + userInfo.task4 + "</p>";
                    resultHTML += "<p><strong>Task 5:</strong> " + userInfo.task5 + "</p>";
                    resultHTML += "<p><strong>Task 6:</strong> " + userInfo.task6 + "</p>";
                    resultHTML += "<p><strong>Task 7:</strong> " + userInfo.task7 + "</p>";
                    // ... other tasks
                    resultDiv.innerHTML = resultHTML;
                }
            } catch (error) {
                console.error('Error fetching or parsing user information:', error);
                errorDiv.innerText = 'Error: Unable to fetch or parse user information.';
                resultDiv.innerHTML = '';
            }
        }
    </script>

</body>
</html>
